<!-- 

INSTRUCTIONS
_____________

COPY & PASTE THE FOLLOWING CODE INTO EACH CEROS EXPERIENCE.

GO TO THE CEROS EXPERIENCE>SETTINGS>CUSTOM HTML>PASTE THE CODE>REPLACE THE URL IN THE JAVASCRIPT AT THE TOP WITH 
THE APPROPRIATE LINK>CLICK 'OK'

BREAK POINT IS AT:
700px

**DON'T FORGET TO INSERT THE EXPERIENCE URLS INTO THE JAVASCRIPT SECTION, 
EXPERIENCE WILL NOT BE RESPONSIVE IF THIS IS NOT DONE**

-->
<script>
    var desktopExperience = "http://view.ceros.com/geico/ceros";
</script>
<style>

/*This is used to adjust the text of the input field and the height of the field */

.form-control,.form-control:focus{

                color:#4e4e4e;

                background-color:#fff; 

                font-family:Lato, Arial, san-serif; 

                text-align:center;

                font-size:16px;

                height:40px; /* this controls the height*/
}

/*This is used to adjust the look of the form */

.form-control{

                width:145px;

                background-image:none;

                border:1px solid #8e8e8e;

                border-radius:.2rem;

                transition:border-color ease-in-out .15s;

                box-shadow ease-in-out .15s;
    
}

/* This is used to modify disclaimer */
#copyright {

                color:rgb(117, 115, 116) !important;

                font-size:10px !important;

                position:absolute !important;

                bottom:0 !important;
}

/*This is used to adjust the border of the input field as it is selected, for accessibility reasons, do not remove focus state */

.form-control:focus{

                border-color:#80bdff;

                outline:0;

                box-shadow:0 0 0 .2rem rgba(0,123,255,.25);

}
    
/* Defines animation used for page load */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
    
/* Ceros code fixes/workarounds */
.form-control{

                display:block;

                background-clip:padding-box;

                float:right !important;
}    
    
/* Gives the entire page an animation when loaded and some Ceros code fixes/workarounds */
.page-scroll{

                animation-name:fadeIn;

                animation-duration:1s;

                animation-fill-mode:both;

                position:absolute !important;

                top:0 !important;
    
                left:50% !important;
    
                transform: translateY(0) translateX(-50%) !important;        

}

[role=button],a,area,button,input:not([type=range]),label,select,summary,textarea{

                -ms-touch-action:manipulation;touch-action:manipulation

}

button,input{

                overflow:visible

}

button,input,optgroup,select,textarea{

                margin:0;

                font-family:inherit;

                font-size:inherit;

                line-height:inherit

}

</style>

<!-- Controls the redirect  -->
<script>

//creates the mobile experience url by appending ‘-mob’ to the desktop experience url 
var mobileExperience = desktopExperience + "-mob";

//will direct to the mobile experience at a browser width under 700px and will direct to the desktop experience at a browser width of over 700px
$(document).ready(function(){
    if(window.location.href.indexOf("preview.ceros.com") > -1) { 
    }
    else {
        if($(window).width() <= 700) {
window.location = mobileExperience;
        }  
    } 
});
</script>


<script type="text/javascript" src="https://www.geico.com/includes/disclaimer/disclaimer_data.js"></script>
<script>
!function(e){"use strict";var n=function(e,n,t){n=encodeURI(n),t=encodeURI(t);var o=e.split("?"),r=[];o.length>1&&(r=o[1].split("&"));for(var i=!1,s=0;s<r.length;s++){var a=r[s].split("=");if(a[0]===n){i=!0,a[1]=t,r[s]=a.join("=");break}}return!1===i&&r.push(n+"="+t),o[0]+"?"+r.join("&")};function t(e){var n="",t=e;if(t.indexOf("?")>-1)for(var o=t.substr(t.indexOf("?")).toLowerCase().split("&"),r=0;r<o.length;r++)if(o[r].indexOf("soa=")>-1||o[r].indexOf("s=")>-1){var i=o[r].split("=");i[1].length>6&&(i[1]=i[1].substring(0,6),location.params({soa:i[1]})),n=i[1]}return n}e.handleFormSubmit=function(e){if(console.log(e),e=e||document.getElementById("sdkZipForm")){var o=e.getAttribute("action"),r=document.getElementById("zipInput");if(r){var i=r.value;o=n(o,"POL_ratedZip5",i)}var s=document.getElementById("soaInput");if(s){var a=t(window.location.href);""===a&&document.referrer&&(a=t(document.referrer)),""===a&&(a="0000001"),s.value=a,o=n(o,"soa",a)}e.setAttribute("action",o)}},require.config({paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v4.min"}}),require(["CerosSDK"],function(e){e.findExperience().fail(function(e){console.error(e)}).done(function(n){n.findComponentsByTag("submit-form").subscribe(e.EVENTS.CLICKED,function(e){var n=document.getElementById("sdkZipForm");n&&(handleFormSubmit(n),n.submit())})})})}(window);
</script>
<script
id="ceros-ga-plugin"
src="//labs.ceros.com/ga-and-gtm-extension/v1-0/ga-and-gtm-extension.min.js?cb=1"
data-mode="parent-page"
data-event-category="ceros-event"
data-tracking-id=”UA-34118221-1”
></script>
<script>
    $(document).ready(function(){
  var someObject={};
  $("selector").click(function(e){
    console.log(someObject);
  });
});
</script>
<script>
(function (root) {
    'use strict';

    /**
     * Safely add a URL Param to a given URL
     *
     * @param {string} url
     * @param {string} key
     * @param {string} value
     * @return {string}
     */
    var setParamInUrl = function (url, key, value) {

        key = encodeURI(key);
        value = encodeURI(value);

        // Split the URL into its path etc and query string
        var urlParts = url.split('?'),
          params = [];

        // If there was a query string
        if (urlParts.length > 1) {
            // turn query string array of params ['key=value', ...]
            params = urlParts[1].split('&');
        }

        // Flag for if the URL already has this param
        var foundKey = false;

        // For every existing param
        for (var i = 0; i < params.length; i++) {

            var paramKeyAndValue = params[i].split('=');

            // If this param is the same as the one we're setting
            if (paramKeyAndValue[0] === key) {

                foundKey = true;

                // Update its value and put it back in the array
                paramKeyAndValue[1] = value;
                params[i] = paramKeyAndValue.join('=');

                break;
            }

        }

        // If we didn't find a param with the same name, add ours as a new one
        if (foundKey === false) {
            params.push(key + '=' + value);
        }

        // Build the URL back up and return it
        return urlParts[0] + '?' + params.join('&');
    };

    /**
     * Get the SOA parameter from the current URL's query string. This is mostly
     * copied from https://www.geico.com/landingpage/go381 with some removal of
     * logic we don't need.
     *
     * @return {string}
     */
    function getSOAParam(url) {
        var foundSOA = "";
        var strHref = url;
        
        if ( strHref.indexOf("?") > -1 ){
            var strParams = strHref.substr(strHref.indexOf("?")).toLowerCase();

            var paramsArray = strParams.split("&");
            for (var i = 0; i < paramsArray.length; i++) {
                if ((paramsArray[i].indexOf("soa=") > -1 ) || (paramsArray[i].indexOf("s=") > -1 )) {
                    var aParamArray = paramsArray[i].split("=");

                    //If our SOA is greater than 6 characters, reduce it
                    if (aParamArray[1].length > 6) {
                        aParamArray[1] = aParamArray[1].substring(0,6);
                        location.params({soa: aParamArray[1]});
                    }

                    foundSOA = aParamArray[1];
                }
            }
        }

        return foundSOA;
    }

    root.handleFormSubmit = function(formElement) {
      console.log(formElement);
        formElement = formElement || document.getElementById('sdkZipForm');
        if(!formElement) {
            return;
        }

        var formAction = formElement.getAttribute('action');

        var zipInput = document.getElementById('zipInput')
        if(zipInput) {
            var zipValue = zipInput.value;

            formAction = setParamInUrl(formAction, 'POL_ratedZip5', zipValue);
        }

        var soaInput = document.getElementById('soaInput')
        if(soaInput) {
            var soaValue = getSOAParam(window.location.href);
            if (soaValue === "" && document.referrer) {
                soaValue = getSOAParam(document.referrer);
            }
            if (soaValue === "") {
                soaValue = "00001";
            }
            
            soaInput.value = soaValue;

            formAction = setParamInUrl(formAction, 'soa', soaValue);
        }

        formElement.setAttribute('action', formAction);
    }

    require.config({
        paths: {
            CerosSDK: "//sdk.ceros.com/standalone-player-sdk-v4.min"
        }
    });

    require(['CerosSDK'], function (CerosSDK) {

        CerosSDK.findExperience()
          .fail(function (error) {
              console.error(error);
          })
          .done(function (experience) {

              var componentCollection = experience.findComponentsByTag('submit-form');

              componentCollection.subscribe(CerosSDK.EVENTS.CLICKED, function (component) {
                  var formElement = document.getElementById('sdkZipForm');
                  if(!formElement) {
                      return;
                  }

                  handleFormSubmit(formElement);
                  formElement.submit();
              });


          });

    });


})(window);
</script>




